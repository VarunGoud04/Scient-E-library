<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register - Scient E-Library</title>
  <link rel="icon" type="image/png" href="logo11.jpg" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background-color: #f7f7f7; }
    header, footer, nav {
      background-color: #003366; color: white; text-align: center;
      padding: 1rem;
    }
    nav a {
      color: white; text-decoration: none; margin: 0 10px; text-transform: uppercase;
    }
    nav a:hover { background-color: #004a94; padding: 8px; border-radius: 4px; }
    .form-container {
      background-color: white; max-width: 500px; margin: 2rem auto; padding: 2rem;
      border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .form-container h2 { text-align: center; margin-bottom: 1rem; }
    .form-container label { display: block; margin-top: 1rem; }
    .form-container input, .form-container select {
      width: 100%; padding: 10px; margin-top: 0.5rem; border: 1px solid #ccc; border-radius: 5px;
    }
    .form-container button {
      width: 100%; padding: 12px; background-color: #0059b3; color: white;
      border: none; border-radius: 5px; margin-top: 1.5rem; cursor: pointer;
    }
    .form-container button:hover { background-color: #004080; }
    .form-container p { text-align: center; margin-top: 1rem; }
    .jntuh-notice { color: red; font-weight: bold; text-align: center; }
    .alert-message, .success-message {
      font-weight: bold; text-align: center; margin-bottom: 1rem;
    }
    .alert-message { color: red; }
    .success-message { color: green; }
    .social-icons { margin-top: 0.5rem; }
    .social-icons a { color: white; text-decoration: none; }
    .social-icons a:hover { text-decoration: underline; }
  </style>
</head>
<body>

<header>
  <h1>Scient E-Library - Register</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="about.html">About</a>
  <a href="login.html">Login</a>
  <a href="contact.html">Contact</a>
</nav>

<div class="form-container">
  <h2>Create an Account</h2>
  <p class="alert-message" id="error-message"></p>
  <p class="success-message" id="success-message"></p>

  <form id="register-form">
    <label for="name">Full Name</label>
    <input type="text" id="name" required placeholder="Enter your full name">

    <label for="email">Email Address</label>
    <input type="email" id="email" required placeholder="Enter your email">

    <label for="password">Password</label>
    <input type="password" id="password" required
      pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$"
      title="Include upper/lowercase, number, and special character."
      placeholder="Enter password">

    <label for="confirm-password">Confirm Password</label>
    <input type="password" id="confirm-password" required placeholder="Confirm your password">

    <label><strong>Only JNTUH University Students Must Register</strong></label>
    <input type="text" id="university" value="JNTUH" readonly>
    <div class="jntuh-notice">ONLY JNTUH STUDENTS CAN REGISTER</div>

    <label for="college">College Name</label>
    <select id="college" required>
      <option value="" disabled selected>Select your college</option>
      <option value="Scient Institute of Technology">Scient Institute of Technology</option>
    </select>

    <label for="regulation">Regulation</label>
    <select id="regulation" required>
      <option value="" disabled selected>Select Regulation</option>
      <option value="R18">R18</option>
      <option value="R22">R22</option>
    </select>

    <label for="branch">Branch</label>
    <select id="branch" required>
      <option value="CSE">CSE</option>
      <option value="AI-ML">AI-ML</option>
      <option value="ECE">ECE</option>
      <option value="AIDS">AIDS</option>
      <option value="CSM">CSM</option>
      <option value="CSC">CSC (Cybersecurity)</option>
    </select>

    <button type="submit">Register</button>
  </form>
  <p>Already have an account? <a href="login.html">Login here</a></p>
</div>

<footer>
  <p>Â© 2024 Scient E-Library. All rights reserved. | Developed by Varun Goud & Team | CSE (AY 2022-2026).</p>
  <div class="social-icons">
    <a href="https://www.instagram.com/Webcreater__2k26"><i class="fab fa-instagram"></i> Follow us on Instagram</a>
  </div>
</footer>

<script type="module">
  // Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBB31ymV2vgVHVgA4Tp_jUZLy4c8VUkPY4",
    authDomain: "scient-e-library.firebaseapp.com",
    projectId: "scient-e-library",
    storageBucket: "scient-e-library.appspot.com",
    messagingSenderId: "724674392756",
    appId: "1:724674392756:web:631eb7c59445f5a2509de1"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const form = document.getElementById("register-form");
  const errorMessage = document.getElementById("error-message");
  const successMessage = document.getElementById("success-message");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    errorMessage.textContent = "";
    successMessage.textContent = "";

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirm-password").value;
    const college = document.getElementById("college").value;
    const regulation = document.getElementById("regulation").value;
    const branch = document.getElementById("branch").value;
    const university = "JNTUH";

    if (password !== confirmPassword) {
      errorMessage.textContent = "Passwords do not match.";
      return;
    }

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      await addDoc(collection(db, "users"), {
        uid: userCredential.user.uid,
        name,
        email,
        college,
        regulation,
        branch,
        university,
        createdAt: new Date()
      });

      successMessage.textContent = "Registration successful!";
      form.reset();
    } catch (error) {
      errorMessage.textContent = error.message;
    }
  });
</script>

</body>
</html>